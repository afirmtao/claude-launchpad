# Postfix main configuration file
# Generated by Ansible

# Basic settings
myhostname = {{ postfix_hostname }}
mydomain = {{ postfix_domain }}
myorigin = {{ postfix_origin }}
mydestination = {{ postfix_mydestination }}

# Network settings
inet_interfaces = {{ postfix_inet_interfaces }}
inet_protocols = {{ postfix_inet_protocols }}

# Relay settings
relayhost = {{ postfix_relayhost }}

# TLS settings
smtp_tls_security_level = {{ postfix_smtp_tls_security_level }}
smtp_tls_CAfile = {{ postfix_smtp_tls_ca_file }}
smtpd_tls_security_level = {{ postfix_smtpd_tls_security_level }}
smtpd_tls_cert_file = {{ postfix_smtpd_tls_cert_file }}
smtpd_tls_key_file = {{ postfix_smtpd_tls_key_file }}

# Message size limits
message_size_limit = {{ postfix_message_size_limit }}
mailbox_size_limit = {{ postfix_mailbox_size_limit }}

# Disable local delivery for security
local_transport = error:Local delivery disabled

# Queue settings
maximal_queue_lifetime = 5d
bounce_queue_lifetime = 3d

# Security settings
smtpd_helo_required = yes
disable_vrfy_command = yes
smtpd_delay_reject = yes
smtpd_relay_restrictions = reject_unauth_destination

# Logging
maillog_file = /var/log/postfix.log